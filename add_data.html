<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <link rel="stylesheet" href="./css/learn.css">
    <link rel="stylesheet" href="./css//checkbox.css">
    <!--Fontawesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--Font-->
    <link href="https://fonts.googleapis.com/css?family=Athiti" rel="stylesheet">
    <!--script-js-->
    <!-- <script src="./js/vendor/modernizr-2.8.3.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--code-prettify-->

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <link href="./code-prettify-master/styles/desert.css" rel="stylesheet">

    <title>learn_code_output</title>

</head>
<style>
    #B_learn {
        top: 59px;
        width: 100%;
        bottom: 100px;
    }
.course{
    font-size: 20px;
    padding: 0;
}
.row {
    margin: 0;
    padding: 0;
    width: 100%;
 }



</style>

<body>
    <div id="container">
        <!--Navbar-->
        <div style="display:none;" class="NowCp"></div>
        <div style="display:none;" class="NowTP"></div>
        <div style="display:none;" class="Nowpractices"></div>
        <div style="display:none;" class="CanNextPage">Fail</div>
        <div id="A_navbar_top">
            <div class="sticky-top" style="width: 100%">
                <nav class="navbar navbar-expand-md navbar-dark bg-dark" style="width: 100%">
                    <div class="col-md-8" style="margin-left: 3%;">
                        <a class="navbar-brand" href="#">
                            <img src="./picture/programming.png" alt="programming Language" class="logo">
                        </a>
                    </div>

                    <div class="col-md-4" style="margin-left: 0%;">
                        <div class="collapse navbar-collapse" id="navbarsmenu">
                            <ul class="navbar-nav ">
                                <li class="nav-item active">
                                    <a class="nav-link" href="#">หน้าแรก
                                        <span class="sr-only">(current)</span>
                                    </a>
                                </li>

                                <li class="nav-item active">
                                    <a class="nav-link FullUserName" href="#">
                                        User
                                    </a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="https://example.com" id="menu"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-user-o" aria-hidden="true"></i>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="menu">
                                        <a class="dropdown-item" href="#">วิชาเรียนทั้งหมด</a>
                                        <a class="dropdown-item BtnGotoReport" href="#">รายงาน</a>
                                        <a class="dropdown-item" href="#">แก้ไขโปรไฟล์</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">ออกจากระบบ</a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsmenu"
                        aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </nav>

            </div>
        </div>

        <!--add_content-->
        <div id="B_learn">
            <div class="scrollbar" id="style-default">
                <div class="row">
                    <!--row 1-->
                    <div class="row" style="padding-top:2%;padding-bottom: 2%;">
                        <div class="col-md-4">
                            <div class="name_course">
                                <label for="course" class="course">ชื่อวิชา</label><br>

                                <div class="input-group" style="text-align: center">
                                    <span class="input-group-addon" id="basic-addon1" style="padding-right:6px">เลือกรายวิชา
                                        :</span>
                                    <select class="form-control" style="border-radius: 5px;">
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-8">
                            <label for="course" class="course">บทเรียน</label><br>
                            <form action="#" style="text-align: center">
                                <label style=" padding-top: 0;"> ชื่อบทเรียน </label><input type="text" id="chapter_name"
                                    style="width:70%"> <button type="button" class="btn btn-primary" style="margin-left: 10px;">บันทึก</button>
                            </form>
                        </div>
                    </div>
                    <!--row 2-->
                    <div class="row" style="padding-top: 2%;padding-bottom: 2%;border: 1px solid #EAEAEA;  background: #EAEAEA;">
                        <div class="col-md-4">
                            <label for="course" class="course">หัวข้อ</label><br>
                            <form action="" style="text-align: center">
                                <label style=" padding-top: 0;"> ชื่อหัวข้อ </label><input type="text" id="topic_name">
                                <button type="button" class="btn btn-primary" style="margin-left: 10px;">บันทึก</button>
                            </form>
                        </div>
                        <div class="col-md-5">
                            <span> <textarea name="" id="topic_content" style="resize:none;width: 85%" rows="4"></textarea>
                                <button type="button" class="btn btn-primary" style="margin-left: 10px;">บันทึก</button></span>
                        </div>
                        <div class="col-md-3">
                            <br>
                            <div class="input-group" style="text-align: center">
                                <span class="input-group-addon" id="basic-addon1" style="padding-right:6px">เลือกบทเรียน
                                    :</span>
                                <select class="form-control" style="border-radius: 5px;border: darkgray 1px solid;" id="chapter_id">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                </select>
                            </div>

                        </div>
                    </div>

                    <!--row 3-->
                    <div class="row" style="padding-top:2%;padding-bottom: 2%;">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="course" class="course">โจทย์ปฏิบัติ</label><br>
                                    <div class="input-group" style="text-align: center">
                                        <span class="input-group-addon" id="basic-addon1" style="padding-right:6px">เลือกบทเรียน
                                            :</span>
                                        <select class="form-control" style="border-radius: 5px;" id="chapter_id">
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4"><br>
                                    <label style=" padding-top: 0;"> ใส่โจทย์ </label><input type="text" id="topic_content" style="width:65%">
                                    <button type="button" class="btn btn-primary" style="margin-left: 10px;">บันทึก</button>
                                </div>
                                <div class="col-md-4"><br>
                                    <label style=" padding-top: 0;"> ใส่ผลลัพธ์ </label><input type="text" id="topic_anser" style="width:62%">
                                    <button type="button" class="btn btn-primary" style="margin-left: 10px;">บันทึก</button>
                                </div>
                            </div>
                        </div>
                        <br>

                        <div class="col-md-12">
                            <form action="">
                                <br>
                                <span style="text-align:center"> <label style=" padding-top: 0;"> ใส่โค้ดคำตอบ</label>
                                <textarea name="" id="topic_content" style="resize:none;width: 75% " rows="4"></textarea></span>
                                <button type="button" class="btn btn-primary" style="margin-left: 10px;">บันทึก</button>
                                <button type="button" class="btn btn-primary" style="margin-left: 10px;">เพิ่มคำตอบ</button>
                            </form>
                        </div>


                    </div>

                </div>
            </div>
        </div>


        <!--Footer-->
        <div id="D_navbar_footer">
            <div class="fixed-bottom">
                <nav class="navbar-footer" style="padding-top: 1%;">
                    <div class="row">
                        <div class="col-lg-3 col-md-3">
                        </div>
                        <div class="col-lg-3 col-md-3">
                        </div>
                        <div class="col-lg-3 col-md-3">
                            <p class="title-widget">LEARNING PROGRAMMING</p>
                            <a href="#" style="text-decoration: none ;">
                                <i class="fa fa-angle-double-right"></i> เกี่ยวกับ </a>
                        </div>
                        <div class="col-lg-3 col-md-3 hidden-xs">
                            <p class="title-widget">ติดต่อ</p>
                            <div class="footerp">
                                <p>
                                    <a>Email :</a>
                                    <a href="#" style="text-decoration: none ;">code4thailand.pl@gmail.com</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>


    <!--script-->
   <!--script-->
   <script>
        function ShowNowPage() {
            var NowP = parseInt($('#nowPage').get(0).innerHTML);

            var AllTopic = $('.topicText');
            var AllContent = $('.contentText');
            for (var i = 0; i < AllTopic.length; i++) {
                if ((NowP - 1) == i) {
                    $(AllTopic.get(i)).attr('style', '');
                    $(AllContent.get(i)).attr('style', '');
                    var val = $(AllTopic.get(i)).attr('val');
                    $('#examcode_teach div[class="Example' + val + '"]').attr('style', '');
                } else {
                    $(AllTopic.get(i)).attr('style', 'display:none;');
                    $(AllContent.get(i)).attr('style', 'display:none;');
                    var val = $(AllTopic.get(i)).attr('val');
                    $('#examcode_teach div[class="Example' + val + '"]').attr('style', 'display:none;');
                }
                PR.prettyPrint()

            }
        }

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        //get แสดงบทเรียน หัวข้อ
        $(function () {
            var UsId = getParameterByName('id');
            UsId = UsId == null ? 0 : UsId;
            $.ajax({
                type: 'get',
                // url: 'https://localhost:44384/api/values/' + UsId,
                url: 'http://35.240.168.120/api/api/values/' + UsId,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    var j = data;
                    var jsonString = JSON.stringify(j)
                    JSON.stringify(jsonString);
                    // alert("Success" + jsonString);
                    //---------------------------------------Chapter-------------------------------
                    $('#accordion-container').innerHTML = '';
                    var resultsStr = '';
                    var all100Per = true;
                    for (var i = 0; i < j.length; i++) {
                        if (j[i].persent.toString() != '100') {
                            all100Per = false;
                        }
                        resultsStr += '<div class="accordion-item">' +
                            '<table style="width:100%;font-size:18px;cursor:pointer;">' +
                            '<tr><th colspan="2">' + '<h3>' + ' ' + "บทที่" + (i + 1) + " : " + j[i]
                            .chapter_name + '<span style="float: right;padding-right: 5px;">' + j[i]
                            .persent + '%</span></h3>' + '</th></tr>' + '</table>' +
                            '<div class="accordion-content">' +
                            "<table  " +
                            ' style="width:100%;font-size:18px;cursor:pointer;">';
                        for (var k = 0; k < j[i].topic.length; k++) {
                            resultsStr += '<tr class="dataCclick" val="' + j[i].chapter_id +
                                '" tpid="' + j[i].topic[k].topic_id +
                                '"><th style="padding-left:50px">' +
                                (k + 1) + '. ' + j[i].topic[k].topic_name + '</th>' +
                                '<th style="text-align:end;">' + j[i].topic[k].persent + '%</th>' +
                                '</tr>';

                        }
                        resultsStr += '<tr class="GotoGame" val="' + (i + 1) +
                            '"><th style="padding-left:50px">' +
                            (j[i].topic.length + 1) + '. เกม </th>' +
                            '<th style="text-align:end;"></th>' + '</tr>';

                        resultsStr += '</table>' + '</div>' + '</div>';
                    }
                    $('#cer-container').get(0).innerHTML = '';
                    if (all100Per == true) {
                        $('#cer-container').get(0).innerHTML = '<a>Download Cer</a>';
                    }
                    $('#accordion-container').html(resultsStr);
                    $(".GotoGame").click(function () {
                        var id = $(this).attr('val');
                        if (id == '1') {
                            window.location.href = 'http://35.240.168.120/game/';
                        } else {
                            window.location.href = 'http://35.240.168.120/game/';
                        }

                    });
                    $(".dataCclick").click(function () {
                        var UsId = getParameterByName('id');
                        UsId = UsId == null ? 0 : UsId;
                        var id = $(this).attr('val');
                        var tpid = $(this).attr('tpid');
                        window.location.href = '../php/test2.html?id=' + UsId + '&cp=' + id +
                            '&tp=' + tpid
                        $.ajax({
                            type: 'get',
                            url: 'http://35.240.168.120/api/api/UpdateLogUser/' +
                                txt,
                            contentType: 'application/json; charset=utf-8',
                            success: function (data) {
                                if (data == 'Pass') {
                                    $('.pcr' + data).attr('style', '');
                                    $('.pc' + pcId).attr('style', '');
                                    $('.CanNextPage').get(0).innerHTML = data;
                                    var tpId = $('.NowTP').get(0).innerHTML;
                                    $('.tpid' + tpId).attr('val', data);
                                    $(AllTopic.get(NowP - 1)).attr('NowPt',
                                        data);
                                } else {
                                    $('.pcr' + data).attr('style', '');
                                    $('.pc' + pcId).attr('style', '');
                                    $('.Nowpractices').get(0).innerHTML = data;
                                    var tpId = $('.NowTP').get(0).innerHTML;
                                    $('.tpid' + tpId).attr('val', data);
                                    var NowP = parseInt($('#nowPage').get(0).innerHTML);
                                }
                            },
                            error: function (data) {

                            }
                        });
                    });

                    var $items = $('.accordion-item');
                    var x, y;
                    for (x = 0, y = j.length; x < y; x++) {
                        $items.eq(x).find('.accordion-content').slideUp(0);
                    }
                    $items.find('h3').click(function () {
                        var $thisAcc = $(this).closest('.accordion-item'),
                            $thisContents = $thisAcc.find('.accordion-content');

                        if ($thisAcc.hasClass('active')) {
                            $thisContents.stop().slideUp(150, function () {
                                $thisAcc.removeClass('active');
                            });
                        } else {
                            $thisContents.stop().slideDown(150, function () {
                                $thisAcc.addClass('active');
                            });
                        }
                    });
                },
                error: function (data) {
                    alert("Error to get json");
                }
            });
        });




        $(".dataCclickabout").click(function () {
            var UsId = getParameterByName('id');
            UsId = UsId == null ? 0 : UsId;
            var id = $(this).attr('val');
            window.location.href = '../php/about.html?id=' + UsId
        });

        //get user
        $(function () {
            var UsId = getParameterByName('id');
            UsId = UsId == null ? 0 : UsId;
            $.ajax({
                type: 'get',
                // url: 'https://localhost:44384/api/GetUserByID/' + UsId,
                url: 'http://35.240.168.120/api/api/GetUserByID/' + UsId,
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data == '') {
                        alert("ไม่พบผู้ใช้งาน");
                    } else {
                        $('.FullUserName').get(0).innerHTML = data;
                    }
                },
                error: function (data) {
                    alert("ไม่พบผู้ใช้งาน");
                }
            });
        });
    </script>




    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

</body>
<div class="modal-backdrop fade show"></div>

</html>
